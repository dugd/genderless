<% const t = (typeof type === 'string' && type === 'result') ? 'result' : 'question'; %>
<% const content = `
<section class="card">
    <section class="new-child">
    <div>
        <h1>Новий підвузол для: <a href="/editor/nodes/${encodeURIComponent(parent.id)}">${parent.label || parent.id}</a></h1>
        <nav style="margin:.5rem 0;">
        <a href="/editor/nodes/${encodeURIComponent(parent.id)}">← Назад</a>
        <span style="margin-left:1rem;">Тип: <strong>${t}</strong></span>
        </nav>
    </div>

    <form method="post" action="/editor/nodes/${encodeURIComponent(parent.id)}/children">
        <input type="hidden" name="_csrf" value="${csrfToken}">
        <input type="hidden" name="type" value="${t}">

        <fieldset style="margin-bottom:1rem;">
        <legend>Відповідь</legend>
        <label>Текст<br><input class="form-field" name="answerText" type="text" required></label>
        </fieldset>

        ${t === 'question' ? `
        <fieldset>
            <legend>Питання</legend>
            <label>Мітка<br><input class="form-field" name="label" type="text"></label><br>
            <label>Текст<br><textarea class="form-field" name="question" rows="3" required></textarea></label>
        </fieldset>
        ` : `
        <fieldset>
            <legend>Результат</legend>
            <label>Мітка<br><input class="form-field" name="label" type="text"></label><br>
            <label>Значення<br><input class="form-field" name="result" type="text" required></label><br>
            <label>Опис<br><textarea class="form-field" name="desc" rows="3"></textarea></label>
        </fieldset>
        `}

        <div class="buttons-wrap">
            <button type="submit">Створити</button>
            <a href="/editor/nodes/${encodeURIComponent(parent.id)}" style="margin-left:.5rem;">Відміна</a>
        </div>
    </form>
    </section>
</section>
`; %>
<%- include('_layout', { body: content, csrfToken: csrfToken }) %>
